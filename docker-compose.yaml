version: '3.3'

services:
  gateway:
    image: nginx:1.15-alpine
    restart: unless-stopped
    volumes:
      - ./docker/nginx:/etc/nginx/conf.d
    ports:
      - '80:80'
  web-api:
    build: ./backend/
    ports:
      - '80:80'
    depends_on:
      - gateway
      - sqldb
  web-app:
    build: ./frontend/
    ports:
      - '80:80'
    depends_on:
      - gateway
      - web-api
  sqldb:
    image: mcr.microsoft.com/mssql/server:2017-latest
    environment:
      - SA_PASSWORD=Pass@word
      - ACCEPT_EULA=Y
    ports:
      - '1433:1433'